<html>
<head>
         <base href="/">
         <h1><p style="text-align:center;">Welcome to welvi store</p></h1>
         <div id="firebaseui-auth-container"></div>
         <div id="loader">Loading...</div>
         
         <meta http-equiv="Permissions-Policy" content="interest-cohort=()"/>
         <link rel="shortcut icon" href="#">
         <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
         <title>welvi store</title> 
</head>

<body>
<script src="https://www.gstatic.com/firebasejs/8.5.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.5.0/firebase-analytics.js"></script>

<!--Authentication-->         
<script src="https://www.gstatic.com/firebasejs/8.5.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.5.0/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/ui/4.8.0/firebase-ui-auth.js"></script>
<link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.8.0/firebase-ui-auth.css" />
         
<script>
         <!--initialize firebase-->
         var config = {
         apiKey: "AIzaSyBFpJ_jHiLPpl4HZckHefuj4_XJxSQTvlg",
         authDomain: "opensw-opener.firebaseapp.com",
         databaseURL: "https://opensw-opener-default-rtdb.firebaseio.com",
         projectId: "opensw-opener",
         storageBucket: "opensw-opener.appspot.com",
         messagingSenderId: "1073815196228",
         appId: "1:1073815196228:web:429c5a2c3af05df4922211",
         measurementId: "G-GCDBT9FVRL"
         };
         firebase.initializeApp(config);
         firebase.analytics();
         
         <!--Authentication-->
         <!--Initialize the FirebaseUI Widget using Firebase.-->
         var ui = new firebaseui.auth.AuthUI(firebase.auth());
         
         var uiConfig = {
         signInFlow: 'popup',
         credentialHelper: 'none',
         signInSuccessUrl: '/2021-1-OSSP2-Opener-1-1/store',
         signInOptions: [
         { 
           provider: firebase.auth.EmailAuthProvider.PROVIDER_ID,
           requireDisplayName: true
         },
         ],

         callbacks: {
                  signInSuccessWithAuthResult: function(currentUser, credential, redirectUrl) {
                  const userId = currentUser.uid; 
                  loader.insertAdjacentHTML('afterend', '<input value="'+userId+'" type="text" hidden="hidden" id="userId" />');
                  // Manually redirect.
                  window.location.assign(`/users/${userId}`);
                  // Do not automatically redirect.
                  return true;
                  },
                  uiShown: function() {
                           document.getElementById('loader').style.display = 'none';
                 }
         } 
         };

         ui.start('#firebaseui-auth-container', uiConfig);    
</script>

</script>

         
</body>
        
</html>
